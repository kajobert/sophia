# This file contains the configuration settings for the Sophia V2 application.

llm:
  provider: "litellm"
  model: "openrouter/deepseek/deepseek-chat"  # Changed from claude-3-haiku - 44% cheaper, same 10/10 quality!
  temperature: 0.1
  max_tokens: 4096

plugins:
  # Local LLM Plugin (Cost-free, offline, private AI)
  tool_local_llm:
    enabled: true
    local_llm:
      runtime: "ollama"
      base_url: "http://localhost:11434"
      model: "llama3.1:8b"  # Tier 1: Fast model - 4.9GB, function calling
      timeout: 600  # 10 minutes - quality over speed in offline mode
      max_tokens: 4096  # Max output tokens
      temperature: 0.7
      # Advanced Ollama parameters for MAXIMUM QUALITY (offline fallback mode)
      # Context limits tested on 16GB RAM:
      # - llama3.1:8b: max 16K (32K causes OOM)
      # - qwen2.5:14b: max 32K (model's native limit)
      num_ctx: 16384  # Context window: 16K (max for 16GB RAM with llama3.1:8b)
      num_predict: 4096  # Max output tokens per response
      num_thread: 10  # Use half of CPU cores for stability
      repeat_penalty: 1.1  # Reduce repetition
      top_k: 40  # Diversity in token selection
      top_p: 0.9  # Nucleus sampling for quality
      # Tier 2 escalation model (for poor plans)
      escalation_model: "qwen2.5:14b"  # 9GB - better reasoning, slower, 32K context
  
  # Configuration for the SQLite Memory plugin (short-term)
  memory_sqlite:
    db_path: "data/sophia.db"
  
  # Configuration for the ChromaDB Memory plugin (long-term semantic search)
  memory_chroma:
    db_path: "data/chroma_db"
    allow_reset: false

  cognitive_task_router:
    enabled: true

  # Configuration for the Self-Tuning Plugin (Phase 3.4 - AMI 1.0)
  cognitive_self_tuning:
    enabled: true
    # Inherits config from autonomy.yaml → self_improvement.self_tuning

  # Configuration for the Jules API plugin
  tool_jules:
    jules_api_key: "${JULES_API_KEY}"  # API key loaded from .env file
    # Note: Jules API is currently in alpha. Request access at jules.google.com

  # Configuration for the Tavily AI Search plugin
  tool_tavily:
    tavily_api_key: "${TAVILY_API_KEY}"  # API key loaded from .env file
    # Get your API key at: https://tavily.com

  # Configuration for the GitHub API plugin
  tool_github:
    github_token: "${GITHUB_TOKEN}"  # API key loaded from .env file
    # Generate token at: https://github.com/settings/tokens
    # Required scopes: repo, workflow, write:packages

  # Configuration for the Jules CLI plugin
  tool_jules_cli:
    enabled: true
    # Note: Requires 'jules login' to be run once for authentication
    # Install: npm install -g @google/jules
    # Complements tool_jules (API) for hybrid workflow

  # Configuration for the Jules Autonomy plugin (HIGH-LEVEL)
  cognitive_jules_autonomy:
    enabled: true
    # Provides autonomous workflow: delegate_task()
    # Single command for: create → monitor → apply results
    # Requires: tool_jules_cli + cognitive_jules_monitor

  # Configuration for Browser Control plugin
  cognitive_browser_control:
    enabled: true
    # Provides browser automation via Playwright
    # Functions: navigate, click, fill, screenshot, test_dashboard
    # Enables SOPHIA to autonomously test its own web interface

# Other plugins like CoreLoggingManager, FileSystemTool, and PluginManager
# do not require specific configurations in this file as their setup is handled
# programmatically or they use default values.
