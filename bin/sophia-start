#/bin/bash
echo "üõë Zastavuji SOPHII..."
if pgrep -f "python.*run.py" > /dev/null; then
    pkill -f "python.*run.py"
    sleep 2
    if ! pgrep -f "python.*run.py" > /dev/null; then
        echo "‚úÖ SOPHIA zastavena"
    else
        pkill -9 -f "python.*run.py"
        echo "‚úÖ SOPHIA zastavena (SIGKILL)"
    fi
else
    echo "‚ÑπÔ∏è  SOPHIA nebƒõ≈æ√≠"
fi
#!/bin/bash
# SOPHIA Start Command
SOPHIA_DIR="$(cd "$(dirname "$0")/.." && pwd)"
cd "$SOPHIA_DIR" || exit 1

if pgrep -f "python.*run.py" > /dev/null; then
    echo "‚ö†Ô∏è  SOPHIA ji≈æ bƒõ≈æ√≠!"
    exit 1
fi

echo "üöÄ Spou≈°t√≠m SOPHII..."
nohup .venv/bin/python run.py --ui classic > /tmp/sophia.log 2>&1 &
PID=$!

echo "‚úÖ SOPHIA spu≈°tƒõna (PID: $PID)"
echo "üìä Dashboard: http://127.0.0.1:8000/dashboard"
echo "Poƒçkej 30s na inicializaci..."
# Indik√°tor pr≈Øbƒõhu (status bar)
for i in $(seq 1 30); do
    bar=""
    j=1
    while [ $j -le $i ]; do bar="$bar#"; j=$((j+1)); done
    j=$((i+1))
    while [ $j -le 30 ]; do bar="$bar-"; j=$((j+1)); done
    printf "\r[%s] %2ds" "$bar" $((30-i))
    sleep 1
done
printf "\n"

if curl -s http://127.0.0.1:8000/api/stats > /dev/null 2>&1; then
    echo "‚úÖ SOPHIA bƒõ≈æ√≠ a odpov√≠d√°!"
else
    echo "‚ö†Ô∏è  Zkontroluj logy: tail -f /tmp/sophia.log"
fi
